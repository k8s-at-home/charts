#
# -- IMPORTANT NOTE
#
# -- This chart inherits from our common library chart. You can check the default values/options here:
# -- https://github.com/k8s-at-home/library-charts/tree/main/charts/stable/common/values.yaml
#

image:
  # -- image repository
  repository: paradoxalarminterface/pai
  # -- image tag
  # @default -- chart.appVersion
  tag:
  # -- image pull policy
  pullPolicy: IfNotPresent

# -- environment variables. See more environment variables in the [paradoxalarminterface documentation](https://paradoxalarminterface.org/docs).
# @default -- See below
env:
  # -- Set the container timezone
  TZ: UTC

# -- Configures service settings for the chart.
# @default -- See values.yaml
service:
  main:
    # -- Main service is disabled, only enable if you want to connect Babyware
    enabled: false
    ports:
      # -- Port for Babyware connection. Set config.ipInterfaceEnable to true if you enable this
      babyware:
        enabled: true
        port: 10000
        protocol: TCP
      http:
        enabled: false

ingress:
  # -- Enable and configure ingress settings for the chart under this key.
  # @default -- See values.yaml
  main:
    enabled: false

# -- Configure persistence settings for the chart under this key.
# @default -- See values.yaml
persistence:
  {}
  # -- data:
  #   enabled: false
  #   mountPath: /data

config:
  # -- Console logging level; CRITICAL: 50, ERROR: 40, WARNING: 30, INFO: 20, DEBUG: 10
  loggingLevelConsole: 20
  # -- File logging level; CRITICAL: 50, ERROR: 40, WARNING: 30, INFO: 20, DEBUG: 10
  loggingLevelFile: 40
  # -- Log file path
  loggingFile:
  # -- Max log file size in MB
  loggingFileMaxSize: 10
  # -- Max old log files to keep
  loggingFileMaxFiles: 2
  # -- Dump RAW Packets to log
  loggingDumpPackets: false
  # -- Dump Messages to log
  loggingDumpMessages: false
  # -- Dump Status to log
  loggingDumpStatus: false
  # -- Dump Event details to log
  loggingDumpEvents: false

  # -- Development
  developmentDumpMemory: false

  # -- Serial or IP Connection Type
  connectionType: "Serial"

  # -- Pathname of the Serial Port
  serialPort: "/dev/ttyS1"
  # -- 9600 for SP/MG. For EVO: Use 38400(default setting) or 57600
  serialBaud: 9600

  # -- IP Module address when using direct IP Connection
  ipConnectionHost: "127.0.0.1"
  # -- IP Module port when using direct IP Connection
  ipConnectionPort: 10000
  # -- IP Module password. "paradox" is default.
  ipConnectionPassword: "paradox"
  # -- SITE ID. IF defined, connection will be made through this method.
  ipConnectionSiteid:
  # -- Email registered in the site
  ipConnectionEmail:
  # -- Use a specific panel. Set it to None to use the first
  ipConnectionPanelSerial:
  # -- No not expect an IP150 module. Used this for base Serial over TCP tunnels
  ipConnectionBare: false

  # -- Interval between status updates in seconds
  keepAliveInterval: 10

  limits:
    # -- Zones to monitor and control
    zone: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17]
    # -- Users to consider
    user: [1, 2, 3, 4]
    # -- Doors to consider
    door: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32]
    # -- PGMs to monitor and control
    pgm: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17]
    # -- Partitions to monitor and control
    partition: [1, 2]
    # -- Buses to monitor
    module: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17]
    # -- Repeaters to monitor
    repeater: [1, 2, 3, 4, 5, 6, 7, 8, 9]
    # -- Keypads to monitor
    keypad: [1, 2, 3, 4, 5, 6, 7, 8, 9]

  # -- Encoding to use when decoding labels. paradox-* or https://docs.python.org/3/library/codecs.html#standard-encodings
  labelEncoding: "paradox-en"
  # -- Interval between refresh of labels in seconds
  labelRefreshInterval: 900
  # -- Duration of a PGM pulse in seconds
  outputPulseDuration: 1
  # -- Update panel time periodically when time drifts more than SYNC_TIME_MIN_DRIFT
  syncTime: false
  # -- Minimum time drift in seconds to initiate time sync
  syncTimeMinDrift: 60
  # -- PC Password. Set to None if Panel has no Password.
  # In Babyware: Right click on your panel -> Properties -> PC Communication (Babyware) ->
  # PC Communication (Babyware) Tab.
  password: "0000"

  # -- Interval between updates of the battery, DC and VDC voltages
  powerUpdateInterval: 60
  # -- Always notify interfaces of power changes
  pushPowerUpdateWithoutChange: true
  # -- Always notify interfaces of all changes
  pushUpdateWithoutChange: false

  # -- Enable MQTT Interface
  mqttEnable: false
  # -- Hostname or address
  mqttHost: "127.0.0.1"
  # -- TCP Port (TLS port if mqttTlsCertPath is set)
  mqttPort: 1883
  # -- Transport to use ("tcp" or "websockets")
  mqttTransport: "tcp"
  # -- Protocol to use ("3.1", "3.1.1" or "5")
  mqttProtocol: "3.1.1"
  # -- Publish messages with QOS level (0 - fire and forget, 1 - at least once, 2 - exactly once)
  mqttQos: 0
  # -- Path to ca cert (/etc/pai/certs/ca.pem), if you want TLS
  mqttTlsCertPath:
  # -- Keep alive
  mqttKeepalive: 60
  # -- MQTT Username for authentication
  mqttUsername:
  # -- MQTT Password
  mqttPassword:
  # -- Publish messages with Retain
  mqttRetain: true
  # -- MQTT Client bind address. Default: "" - pick automatically
  mqttBindAddress: ""
  # -- MQTT Client bind port. Default: 0 - pick automatically
  mqttBindPort: 0
  # -- Interval for republishing all data
  mqttRepublishInterval: 43200
  # -- Publish definitions of partitions/zones/users to MQTT. Not required in most cases.
  mqttPublishDefinitions: false

  # -- Root of all topics
  mqttBaseTopic: "paradox"
  # -- Base for zone states
  mqttZoneTopic: "zones"
  # -- Base for partition states
  mqttPartitionTopic: "partitions"
  # -- Base for buses states
  mqttBusTopic: "buses"
  # -- Base for bus module states
  mqttModuleTopic: "bus-module"
  # -- Base for panel states
  mqttSystemTopic: "system"
  # -- Base for repeater states
  mqttRepeaterTopic: "repeaters"
  # -- Base for user states
  mqttUserTopic: "users"
  # -- Base for events
  mqttEventsTopic: "events"
  # -- Base for control of other elements (ROOT/CONTROL/TYPE)
  mqttControlTopic: "control"
  # -- Base for definitions
  mqttDefinitionsTopic: "control"
  # -- Prefix for Holme Assistant discovery
  mqttHomeassistantDiscoveryPrefix: "homeassistant"
  # -- Topic for output events
  mqttOutputTopic: "outputs"
  # -- Topic for door events
  mqttDoorTopic: "doors"
  # -- Topic for keypad events
  mqttKeypadTopic: "keypads"
  # -- Topic for state events
  mqttStatesTopic: "states"
  # -- Topic for raw events
  mqttRawTopic: "raw"

  # -- Topic for notifications
  mqttNotificationsTopic: "notifications"
  mqttSendPanicTopic: "panic"
  mqttPublishRawEvents: true
  # -- Topic for interfaces
  mqttInterfaceTopic: "interface"
  mqttToggleCodes: {}
  # -- use 0 and 1 instead of true and false
  mqttUseNumericStates: false

  # -- Publish command statuses to MQTT
  mqttPublishCommandStatus: false
  # -- Topic for command statuses
  mqttCommandStatusTopic: "command_status"

  # -- MQTT Home Assistant Auto Discovery
  mqttHomeassistantAutodiscoveryEnable: false
  mqttHomeassistantCode:

  # -- Publish dashboard app
  mqttDashPublish: false
  mqttDashTopic: "metrics/exchange/pai"
  mqttDashTemplate: "/etc/pai/mqtt_dash.txt"

  # -- alias for commands through text based interfaces
  commandAlias:
    arm: "partition all arm"
    disarm: "partition all disarm"

  # -- For homebridge
  mqttCommandAlias:
    armed_home: "arm_stay"
    armed_night: "arm_sleep"
    armed_away: "arm"
    disarmed: "disarm"

  # -- Home Assistant Notifications (HASS.io required)
  homeassistantNotificationsEnable: false
  homeassistantNotificationsNotifierName: "notify"
  homeassistantNotificationsMinEventLevel: "INFO"
  homeassistantPublishPartitionProperties:
    - "target_state"
    - "current_state"
  homeassistantPublishZoneProperties:
    - "open"
    - "tamper"
  # -- Event filtering by tags:
  # list of tags to include or exclude see hardware event.py for tag list
  # eg "live,alarm,-restore" or "live,trouble,-clock" or "live,tamper"
  homeassistantNotificationsEventFilters: []

  # -- Event filtering using regexp. Cannot be used together with homeassistantNotificationsEventFilters
  # List of tuples or regexp matching "type,label,property=value,property2=value" eg. [(major, minor), "zone:HOME:entry_delay=true", ...]
  # eg r".*"
  homeassistantNotificationsAllowEvents: []
  # -- Same as homeassistantNotificationsAllowEvents but to ignore some specific events that matched in _ALLOW_EVENTS
  # eg r"zone,[\w]+,no_delay=true" or r"zone,[\w]+,exit_delay=.*"
  homeassistantNotificationsIgnoreEvents: []

  ## -- Pushbullet
  pushbulletEnable: false
  # -- Authentication key used for Pushbullet
  pushbulletKey: ""
  # -- Pushbullet user identifiers for notifications and interaction
  pushbulletContacts: []
  pushbulletMinEventLevel: "INFO"
  # -- Event filtering by tags
  # list of tags to include or exclude see hardware event.py for tag list
  # eg "live,alarm,-restore" or "live,trouble,-clock" or "live,tamper"
  pushbulletEventFilters: []

  # -- Event filtering using regexp. Cannot be used together with pushbulletEventFilters
  # List of tuples or regexp matching "type,label,property=value,property2=value" eg. [(major, minor), "zone:HOME:entry_delay=true", ...]
  # eg r".*"
  pushbulletAllowEvents: []
  # -- Same as previous  but to ignore some specific events that matched in _ALLOW_EVENTS
  # eg r"zone,[\w]+,no_delay=true" or r"zone,[\w]+,exit_delay=.*"
  pushbulletIgnoreEvents: []

  ## -- Pushover
  pushoverEnable: false
  # -- Application token for Pushover
  pushoverKey: ""
  # -- Pushover user or group keys to broadcast notifications to
  # @default [{user_key: "<user_key>", devices: "*"}]
  pushoverBroadcastKeys: []

  pushoverMinEventLevel: "INFO"
  # -- Event filtering by tags:
  # list of tags to include or exclude see hardware event.py for tag list
  # eg "live,alarm,-restore" or "live,trouble,-clock" or "live,tamper"
  pushoverEventFilters: []

  # -- Event filtering using regexp. Cannot be used together with pushoverEventFilters
  # List of tuples or regexp matching "type,label,property=value,property2=value" eg. [(major, minor), "zone:HOME:entry_delay=true", ...]
  # eg r".*"
  pushoverAllowEvents: []

  # -- Same as pushoverAllowEvents but to ignore some specific events that matched in _ALLOW_EVENTS
  # eg r"zone,[\w]+,no_delay=true" or r"zone,[\w]+,exit_delay=.*"
  pushoverIgnoreEvents: []

  ## -- Signal
  signalEnable: false
  # -- Contacts that are allowed to control the panel and receive notifications through Signal
  signalContacts: []
  signalMinEventLevel: "INFO"
  # -- Event filtering by tags:
  # list of tags to include or exclude see hardware event.py for tag list
  # eg "live,alarm,-restore" or "live,trouble,-clock" or "live,tamper"
  signalEventFilters: []
  # -- Event filtering using regexp. Cannot be used together with signalEventFilters
  # List of tuples or regexp matching "type,label,property=value,property2=value" eg. [(major, minor), "zone:HOME:entry_delay=true", ...]
  # eg r".*"
  signalAllowEvents: []

  # -- Same as signalAllowEvents but to ignore some specific events that matched in _ALLOW_EVENTS
  # eg r"zone,[\w]+,no_delay=true" or r"zone,[\w]+,exit_delay=.*"
  signalIgnoreEvents: []

  ## -- GSM
  gsmEnable: false
  # -- Baudrate of the GSM modem
  gsmModemBaudrate: 115200
  # -- Pathname of the serial port
  gsmModemPort: ""
  # -- Contacts that are allowed to control the panel and receive notifications through SMS
  gsmContacts: []
  gsmMinEventLevel: "CRITICAL"
  # -- Event filtering by tags:
  # list of tags to include or exclude see hardware event.py for tag list
  # eg "live,alarm,-restore" or "live,trouble,-clock" or "live,tamper"
  gsmEventFilters: []

  # -- Event filtering using regexp. Cannot be used together with gsmEventFilters
  # List of tuples or regexp matching "type,label,property=value,property2=value" eg. [(major, minor), "zone:HOME:entry_delay=true", ...]
  # eg r".*"
  gsmAllowEvents: []

  # -- Same as gsmAllowEvents but to ignore some specific events that matched in _ALLOW_EVENTS
  # eg r"zone,[\w]+,no_delay=true" or r"zone,[\w]+,exit_delay=.*"
  gsmIgnoreEvents: []

  # -- IP Socket Interface for remote PAI instance or Babyware
  ipInterfaceEnable: false
  ipInterfaceBindAddress: "0.0.0.0"
  ipInterfaceBindPort: 10000
  ipInterfacePassword: "paradox"

  # -- Dummy Interface for testing
  dummyInterfaceEnable: false
  dummyEventFilters: []
  dummyMinEventLevel: "DEBUG"
